# =============================================================================
# Revenue Stream Native - Environment Variables
# =============================================================================
# 
# This file contains all environment variables needed for the AI Risk Engine
# and BezLiquidityRamp smart contract integration.
# 
# Setup Instructions:
# 1. Copy this file to .env in backend/
# 2. Replace all placeholder values with actual values
# 3. NEVER commit .env to git (already in .gitignore)
# 4. Keep AI_SIGNER_PRIVATE_KEY secure (backend wallet)
# 
# =============================================================================

# -----------------------------------------------------------------------------
# AI Risk Engine Configuration
# -----------------------------------------------------------------------------

# Backend wallet private key for signing transactions
# This wallet must have SIGNER_ROLE granted on the BezLiquidityRamp contract
# SECURITY: Keep this secret! Generate with: ethers.Wallet.createRandom()
AI_SIGNER_PRIVATE_KEY=0x1234567890abcdef1234567890abcdef1234567890abcdef1234567890abcdef

# Public address of the AI signer wallet (for verification)
# This should match the address derived from AI_SIGNER_PRIVATE_KEY
AI_SIGNER_ADDRESS=0xYourBackendWalletAddress

# -----------------------------------------------------------------------------
# Smart Contract Addresses
# -----------------------------------------------------------------------------

# BezLiquidityRamp contract address (deployed on Polygon)
# Get this from deployment script output
BEZ_LIQUIDITY_RAMP_ADDRESS=0xYourDeployedContractAddress

# BEZ token contract address
BEZ_TOKEN_ADDRESS=0xYourBezTokenAddress

# Stablecoin (USDC) contract address
# Polygon Mainnet: 0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174
# Polygon Mumbai: 0x0FA8781a83E46826621b3BC094Ea2A0212e71B23
STABLECOIN_ADDRESS=0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174

# -----------------------------------------------------------------------------
# Blockchain Configuration
# -----------------------------------------------------------------------------

# RPC endpoint for blockchain interaction (ethers.js provider)
# Get free RPC from: Alchemy, Infura, QuickNode, or public endpoints
# Polygon Mainnet: https://polygon-rpc.com
# Polygon Mumbai: https://rpc-mumbai.maticvigil.com
POLYGON_RPC_URL=https://polygon-rpc.com

# Chain ID for signature verification
# Polygon Mainnet: 137
# Polygon Mumbai: 80001
CHAIN_ID=137

# -----------------------------------------------------------------------------
# AI Risk Engine Parameters
# -----------------------------------------------------------------------------

# Minimum risk score to approve transactions (0-100)
# Default: 60 (approves LOW_RISK, MEDIUM_RISK, rejects HIGH_RISK)
# Higher = stricter (e.g., 70 only approves LOW_RISK and above)
MIN_RISK_SCORE=60

# Signature validity duration (seconds)
# Default: 300 (5 minutes) - prevents signature replay
SIGNATURE_DEADLINE_SECONDS=300

# Maximum transaction amount in USDC (fraud prevention)
# Default: 10000 (flag transactions above $10,000)
MAX_TRANSACTION_AMOUNT=10000

# -----------------------------------------------------------------------------
# KYC Integration (Optional)
# -----------------------------------------------------------------------------

# API key for KYC verification service (e.g., Sumsub, Jumio)
KYC_API_KEY=your_kyc_provider_api_key
KYC_API_URL=https://api.kyc-provider.com

# -----------------------------------------------------------------------------
# VPN Detection (Optional)
# -----------------------------------------------------------------------------

# API key for VPN/Proxy detection (e.g., IPQualityScore, MaxMind)
VPN_DETECTION_API_KEY=your_vpn_detection_api_key
VPN_DETECTION_API_URL=https://api.vpn-detector.com

# -----------------------------------------------------------------------------
# Sanctions Screening (Optional)
# -----------------------------------------------------------------------------

# API key for sanctions list checking (e.g., Chainalysis, Elliptic)
SANCTIONS_API_KEY=your_sanctions_api_key
SANCTIONS_API_URL=https://api.sanctions-provider.com

# -----------------------------------------------------------------------------
# Monitoring & Alerts
# -----------------------------------------------------------------------------

# Discord webhook for high-risk transaction alerts
DISCORD_WEBHOOK_URL=https://discord.com/api/webhooks/your-webhook-url

# Slack webhook for system monitoring
SLACK_WEBHOOK_URL=https://hooks.slack.com/services/your-webhook-url

# Email alerts (SMTP configuration)
ALERT_EMAIL_TO=admin@bezhas.com
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USER=noreply@bezhas.com
SMTP_PASS=your_email_password

# -----------------------------------------------------------------------------
# Rate Limiting
# -----------------------------------------------------------------------------

# Maximum signature requests per IP per minute
RATE_LIMIT_PER_MINUTE=10

# Maximum signature requests per wallet per day
WALLET_RATE_LIMIT_PER_DAY=50

# -----------------------------------------------------------------------------
# Development/Testing
# -----------------------------------------------------------------------------

# Enable debug logging (verbose output)
DEBUG_MODE=false

# Skip AI evaluation for testing (approve all - DANGER: DO NOT USE IN PRODUCTION)
SKIP_AI_EVALUATION=false

# Mock signature generation (for frontend testing without backend wallet)
MOCK_SIGNATURES=false

# =============================================================================
# FRONTEND ENVIRONMENT VARIABLES (frontend/.env)
# =============================================================================
# 
# Copy these to frontend/.env file:
# 
# VITE_BEZ_LIQUIDITY_RAMP_ADDRESS=0xYourDeployedContractAddress
# VITE_BEZ_TOKEN_ADDRESS=0xYourBezTokenAddress
# VITE_STABLECOIN_ADDRESS=0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174
# VITE_POLYGON_RPC_URL=https://polygon-rpc.com
# VITE_CHAIN_ID=137
# 
# =============================================================================

# =============================================================================
# SECURITY CHECKLIST
# =============================================================================
# 
# Before going to production, verify:
# 
# ✅ AI_SIGNER_PRIVATE_KEY is from a secure, dedicated wallet
# ✅ This wallet has SIGNER_ROLE on BezLiquidityRamp contract
# ✅ This wallet has no other permissions (principle of least privilege)
# ✅ .env is in .gitignore (never committed to git)
# ✅ Backup private key in secure vault (1Password, AWS Secrets Manager, etc.)
# ✅ Rate limiting enabled (prevent spam/DoS)
# ✅ SKIP_AI_EVALUATION=false (do not skip in production!)
# ✅ MOCK_SIGNATURES=false (real signatures only in production!)
# ✅ MIN_RISK_SCORE set appropriately (60-70 recommended)
# ✅ Monitoring webhooks configured (Discord/Slack alerts)
# ✅ KYC/VPN/Sanctions APIs integrated (if using)
# 
# =============================================================================

# =============================================================================
# REVENUE TRACKING
# =============================================================================
# 
# To monitor revenue:
# 
# 1. Check treasury wallet balance:
#    - View on Polygonscan: https://polygonscan.com/address/<treasury-address>
#    - Filter by USDC token transfers
# 
# 2. Query contract statistics:
#    - Call getStats() on BezLiquidityRamp
#    - Returns: totalVolumeProcessed, totalFeesCollected, totalTransactions
# 
# 3. Calculate monthly revenue:
#    - totalFeesCollected × current USDC price
#    - Example: 5000 USDC collected = $5,000 USD
# 
# 4. Track with analytics:
#    - Integrate with Dune Analytics
#    - Create dashboard for fee collection events
#    - Monitor PlatformFeeCollected event logs
# 
# Expected Revenue (based on 0.5% fee):
# - $100K monthly volume → $500/month → $6K/year
# - $1M monthly volume → $5,000/month → $60K/year
# - $10M monthly volume → $50,000/month → $600K/year
# 
# =============================================================================
