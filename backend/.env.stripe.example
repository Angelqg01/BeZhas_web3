# ============================================================================
# STRIPE CONFIGURATION
# ============================================================================
# 
# Configuración de Stripe para pagos seguros
# 
# IMPORTANTE:
# - Usar claves LIVE en producción
# - Usar claves TEST para desarrollo/testing
# - NUNCA compartir claves secretas en repositorios públicos
# - Rotar claves si se comprometen
# 
# ============================================================================

# ----------------------------------------------------------------------------
# CLAVES DE STRIPE
# ----------------------------------------------------------------------------

# Clave secreta (Backend only - NUNCA exponer al frontend)
# Obtener de: https://dashboard.stripe.com/apikeys
STRIPE_SECRET_KEY=sk_live_YOUR_SECRET_KEY_HERE

# Clave publicable (Frontend - Seguro para exponer)
# Obtener de: https://dashboard.stripe.com/apikeys
STRIPE_PUBLISHABLE_KEY=pk_live_YOUR_PUBLISHABLE_KEY_HERE

# Webhook signing secret (Obtener de Stripe Dashboard)
# Ir a: https://dashboard.stripe.com/webhooks
# Crear endpoint: https://tu-dominio.com/api/stripe/webhook
# Copiar "Signing secret"
STRIPE_WEBHOOK_SECRET=whsec_OBTENER_DE_DASHBOARD_STRIPE

# Claves de test (comentadas por defecto, descomentar para testing)
# STRIPE_SECRET_KEY=sk_test_...
# STRIPE_PUBLISHABLE_KEY=pk_test_...
# STRIPE_WEBHOOK_SECRET=whsec_test_...

# ----------------------------------------------------------------------------
# URLS DE REDIRECCIÓN
# ----------------------------------------------------------------------------

# URL del frontend (cambiar en producción)
FRONTEND_URL=https://bezhas.com

# URLs de éxito/cancelación de pago
# Por defecto se construyen como: ${FRONTEND_URL}/payment/success
# Si necesitas URLs custom, descomenta y configura:
# STRIPE_SUCCESS_URL=https://bezhas.com/checkout/success
# STRIPE_CANCEL_URL=https://bezhas.com/checkout/cancel

# ----------------------------------------------------------------------------
# JWT SECRETS (para refresh token system)
# ----------------------------------------------------------------------------

# Secret principal para access tokens (15 minutos)
JWT_SECRET=tu-secret-key-super-seguro-aqui-cambiar-en-produccion

# Secret para refresh tokens (7 días)
JWT_REFRESH_SECRET=otro-secret-diferente-para-refresh-tokens-cambiar

# ----------------------------------------------------------------------------
# CONFIGURACIÓN DE TOKENS
# ----------------------------------------------------------------------------

# Duración de access token (por defecto: 15m)
# ACCESS_TOKEN_EXPIRY=15m

# Duración de refresh token (por defecto: 7d)
# REFRESH_TOKEN_EXPIRY=7d

# Máximo de dispositivos simultáneos (por defecto: 5)
# MAX_DEVICES=5

# ----------------------------------------------------------------------------
# RATE LIMITING
# ----------------------------------------------------------------------------

# Habilitar rate limiting avanzado
ENABLE_ADVANCED_RATE_LIMIT=true

# Habilitar rate limiting de mensajes
ENABLE_MESSAGE_RATE_LIMIT=true

# Límites de mensajes (opcionales, tienen defaults)
# MESSAGE_BASE_LIMIT=5      # mensajes por segundo
# MESSAGE_BURST_LIMIT=15    # mensajes por 10 segundos
# MESSAGE_HOURLY_LIMIT=500  # mensajes por hora

# ----------------------------------------------------------------------------
# REDIS (para rate limiting distribuido)
# ----------------------------------------------------------------------------

# Configuración de Redis (si usas Redis, sino usa in-memory)
# REDIS_HOST=localhost
# REDIS_PORT=6379
# REDIS_PASSWORD=
# REDIS_DB=0

# ----------------------------------------------------------------------------
# PRECIOS DE STRIPE (configurados en stripe.service.js)
# ----------------------------------------------------------------------------

# Suscripciones Premium:
# - Monthly: $9.99/mes
# - Yearly: $99.99/año
# - Lifetime: $299.99 una vez

# Tokens BZS:
# - Precio por token: $0.10

# ----------------------------------------------------------------------------
# TESTING
# ----------------------------------------------------------------------------

# Tarjetas de prueba de Stripe:
# Success: 4242 4242 4242 4242
# Decline: 4000 0000 0000 0002
# 3D Secure: 4000 0025 0000 3155

# ============================================================================
# NOTAS IMPORTANTES
# ============================================================================
#
# 1. SEGURIDAD:
#    - Rotar JWT_SECRET y JWT_REFRESH_SECRET en producción
#    - Nunca commitear este archivo a Git (agregar a .gitignore)
#    - Usar variables de entorno del servidor en producción
#
# 2. STRIPE:
#    - Configurar webhook en: https://dashboard.stripe.com/webhooks
#    - Eventos a escuchar:
#      * checkout.session.completed
#      * payment_intent.succeeded
#      * payment_intent.payment_failed
#      * customer.subscription.created
#      * customer.subscription.deleted
#      * customer.subscription.updated
#
# 3. REDIS:
#    - Para producción multi-instancia, usar Redis
#    - Para desarrollo/testing, funciona con in-memory store
#
# 4. 2FA:
#    - No requiere configuración adicional
#    - Funciona con Google Authenticator, Authy, etc.
#
# ============================================================================
